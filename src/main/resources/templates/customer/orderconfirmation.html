<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Xác nhận đơn hàng</title>
    <!-- Đường dẫn tới các tệp CSS của Bootstrap -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<style>

		body { background-color: #f8f9fa  }


    	h3 {
        	text-align: center;
        	margin-top: 20px;
        	margin-bottom: 30px;
        	color: rgb(2,88,155);
    	}
    	h4 {
        	margin-bottom: 20px;
        	color: rgb(2,88,155);
    	}
    	.btn-back {
			border-radius: 10px;
			color: white;
			display: center;
			margin-top: 20px;
			text-align: left;
		}
		.btn-back:hover {
			color: rgb(182,232,241)
		}
		.frame-main {
	        border: 2px solid rgb(182,232,241);
	        border-radius: 5px;
	        padding: 20px;
	        border-radius: 15px;
	        margin-bottom: 30px;
	    }

	    .frame-main-3 {
	        border: 2px solid rgb(182,232,241);
	        border-radius: 5px;
	        padding: 20px;
	        border-radius: 15px
	    }
	    .frame-main-2 {
	        border: 2px solid rgb(182,232,241);
	        border-radius: 5px;
	        padding: 20px;
	        border-radius: 15px;
	        margin-bottom: 30px;
	    }

	    .thead-title {
		    border-radius: 25px;
		    overflow: hidden;
		    background-color: rgb(182,232,241);
			color: black;
			border-radius: 15px
		}
		.thead-title th:first-child {
		    border-top-left-radius: 15px;
		}

		.thead-title th:last-child {
		    border-top-right-radius: 15px;
		}


<!--		Bo tròn hàng cuối trong bảng-->
<!--		tr:last-child td:first-child {-->
<!--		    border-bottom-left-radius: 15px;-->
<!--		}-->



<!--		tr:last-child td:last-child {-->
<!--		    border-bottom-right-radius: 15px;-->
<!--		}-->

<!--		table {-->
<!--        	border-collapse: collapse;-->
<!--	    }-->
<!--	    td {-->
<!--	        border: 1px solid rgb(242,242,242);-->
<!--	    }-->

	    .container.main {
			border: 2px ;
	        border-radius: 5px;
	        border-radius: 15px;
	        padding: 15px;
	        margin-top: 20px;
	        margin-bottom: 20px;
		}

		.frame-main-4 {
		  background-color: white;
		  margin-top: 10px;
		}

		.navbar-nav {
			display: frex;
		}
		.navbar-nav-left {
			width: 70%;
		}
		.navbar-nav-right {
			width: 30%;
		}
		.nav-link {
			display: flex;
      		align-items: center;
      		column-gap: 0.5rem;
      		width: fit-content;
		}
		.move-right {
			margin-left: auto;
			display: flex;
			float: right;
		}
		.material-symbols-outlined.order{
			color: grey;
		}

		.container.main {
			box-shadow: 0 8px 10px rgb(226, 226, 226);
			margin-top: 40px;
			margin-bottom: 40px;
		}

		.material-symbols-outlined.back {
			color: rgb(2,88,155);
		}

		.material-symbols-outlined.back:hover {
			color: rgb(182,232,241);
		}

		.badge.badge-wait{
			color: white;
			background-color: orange;
		}


		.badge-01 {
			color: #5390f5;
			height: 40px;
			font-weight: bold; /* In đậm */
			font-size: 20px; /* Tăng kích thước chữ */
		}

		.btn-receive {
			background-color: #3448c5;
			border-radius: 50px;
			color: white;
			width: 200px;
			box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
		}
		.btn-receive:hover {
			background-color: #211f7f;
			color: white;
			box-shadow: 0px 6px 8px rgba(0, 0.4, 0, 0.2);
		}

		.btn-return {
			background-color: #de2652;
			border-radius: 50px;
			color: white;
			width: 200px;
			box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
		}
		.btn-return:hover {
			background-color: #c90e0f;
			color: white;
			box-shadow: 0px 6px 8px rgba(0, 0.4, 0, 0.2);
		}

		.btn-destroy{
			background-color: #de2652;
			border-radius: 50px;
			color: white;
			width: 200px;
			box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
		}

		.btn-destroy:hover {
			background-color: #c90e0f;
			color: white;
			box-shadow: 0px 6px 8px rgba(0, 0.4, 0, 0.2);
		}


		.alert.confirm {
			background-color: #ffebae;
		}

		.TWLNg9 {
			padding: 3px 0;
		}
		.qJkRlY {
			background-image: repeating-linear-gradient(45deg,#6fa6d6,#6fa6d6 33px,transparent 0,transparent 41px,#f18d9b 0,#f18d9b 74px,transparent 0,transparent 82px);
			background-position-x: -1.875rem;
			background-size: 7.25rem .1875rem;
			height: .1875rem;
			width: 100%
		}

		.badge {
			border-radius: 50px;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 25px;
			width: auto;
			padding 5px;
		}

		.btn-continue{
			background-color: #3448c5;
			border-radius: 50px;
			color: white;
			width: 200px;
			box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
		}

		.btn-continue:hover {
			background-color: #211f7f;
			color: white;
			box-shadow: 0px 6px 8px rgba(0, 0.4, 0, 0.2);
		}

	</style>
</head>
<body>
	<div th:replace="~{layout/header :: header}"></div>
	<div class="container main" style="background-color: white; padding: 20px">
		<div class="container-body" style="padding: 0px">
			<div class="row-cart align-items-center">
				<div class="col-00" style="display: flex">
					<h6 style="color: #211f7f; align-items: center;  margin: 0px 5px 0px 0px; font-family: Verdana; font-weight: bold">Xác nhận đơn hàng</h6>
				</div>
				<div class="row-order d-flex align-items-center" style="justify-content: flex-end; height: 50px; border-bottom: 1px solid #cecece;">
					<div class="col-order d-flex" style="justify-content: flex-end; font-size: 20px; padding: 0px 20px;">
						<p style="margin: 0px 5px 0px 0px; color: #f17746">MÃ ĐƠN HÀNG:</p>
						<span th:text="${order.id}" class="align-middle text-center" style="color: #f17746"> </span>
					</div>
					<div style="border-left: 2px solid #a2abb4; height: 20px;"></div>
					<div class="col-order d-flex" style="justify-content: flex-end; padding: 0px 20px">
						<span th:switch="${order.status}" >
							<span th:case="0" class="badge-01 ">CHỜ XÁC NHẬN</span>
							<span th:case="1" class="badge-01 ">CHỜ LẤY HÀNG</span>
							<span th:case="2" class="badge-01 ">ĐANG GIAO</span>
							<span th:case="3" class="badge-01 ">ĐÃ GIAO</span>
							<span th:case="4" class="badge-01 ">ĐÃ HỦY ĐƠN</span>
							<span th:case="5" class="badge-01 ">YÊU CẦU TRẢ HÀNG</span>
							<span th:case="6" class="badge-01 ">XỬ LÝ TRẢ HÀNG</span>
							<span th:case="7" class="badge-01 ">TRẢ HÀNG THÀNH CÔNG</span>
							<span th:case="8" class="badge-01 ">YÊU CẦU TRẢ HÀNG BỊ TỪ CHỐI</span>
							<span th:case="9" class="badge-01 ">KHÔNG NHẬN HÀNG</span>
							<span th:case="10" class="badge-01 ">ĐÃ NHẬN HÀNG</span>
							<span th:case="*" >Trạng thái không hợp lệ</span>
						</span>
					</div>
				</div>
				<div th:if="${order.status == 0}" class="row-order align-items-center">
					<div th:if="${order.status == 0}" class="alert alert-success d-flex" style="font-weight: bold; color: rgb(98,191,94);">
						Đơn hàng của bạn đã được đặt thành công.
					</div>
					<p style="color: green; margin-top: 15px; font-weight: bold; ">Cảm ơn bạn đã đặt hàng!</p>
					<form th:action="@{/receivedorder}" th:if="${order.status == 10}" method="post" style="display: flex; justify-content: flex-end; align-items: flex-end; margin-top: 20px">
						<input type="hidden" name="orderId" th:value="${order.id}" />
						<button type="submit" class="btn btn-receive">Mua lại</button>
					</form>
				</div>

				<div class="row-title d-flex align-items-center" style="height: 50px">
					<h6>Địa chỉ nhận hàng</h6>
				</div>
				<div class="row-info d-flex align-items-center" style="padding: 0px 0px 20px 0px;">
					<div class="col-01 center-content align-items-center justify-content-center" style="width: 330px;  border-right: 1px solid #cecece; padding: 0px 10px 0px 0px">
						<div class="row-name d-flex align-items-center" style="margin-bottom: 10px">
							<span class="material-symbols-outlined order" style="margin-right: 5px;">person_2</span>
							<hr style="flex-grow: 1; border-top: 1px solid ; margin: 0px 2px 0px 2px; color: #a2abb4;">
							<div th:text="${order.name}" class="name" style="width: 88%; margin-left: 5px;"></div>
						</div>
						<div class="row-name d-flex align-items-center" style="margin-bottom: 10px">
							<span class="material-symbols-outlined order" style="margin-right: 5px;">call</span>
							<hr style="flex-grow: 1; border-top: 1px solid ; margin: 0px 2px 0px 2px; color: #a2abb4;">
							<div th:text="${order.phoneNumber}" class="phone-number" style="width: 88%; margin-left: 5px;"></div>
						</div>
						<div class="row-name d-flex align-items-center" style="margin-bottom: 10px">
							<span class="material-symbols-outlined order" style="margin-right: 5px;">mail</span>
							<hr style="flex-grow: 1; border-top: 1px solid ; margin: 0px 2px 0px 2px; color: #a2abb4;">
							<div th:text="${order.email}" class="email" style="width: 88%; margin-left: 5px;"></div>
						</div>
						<div class="row-name d-flex align-items-center">
							<span class="material-symbols-outlined order" style="margin-right: 5px;">location_on</span>
							<hr style="flex-grow: 1; border-top: 1px solid ; margin: 0px 2px 0px 2px; color: #a2abb4;">
							<div th:text="${order.address}" class="location" style="width: 88%; margin-left: 5px;"></div>
						</div>
					</div>
					<div class="col-02 center-content align-items-center justify-content-center" style="width: 530px">
						<div class="row-date d-flex align-items-center">
							<span class="material-symbols-outlined order" style="margin-right: 10px; margin-left: 20px">order_approve</span>
							<div th:text="${#temporals.format(order.dateOrder.toLocalDateTime(), 'dd/MM/yyyy')}" class="align-middle text-center"></div>
							<p style="margin: 0px 0px 0px; padding: 0 20px; font-weight: bold; color: grey;">Đặt hàng thành công</p>
						</div>
						<div class="row-delivery align-items-center" style="margin-top: 10px">
							<div th:if="${order.status == 0 || order.status == 1 || order.status == 2}" class="date d-flex align-items-center" role="alert">
								<span class="material-symbols-outlined order" style="margin-right: 10px; margin-left: 20px">hourglass_top</span>
								<span th:text="${#temporals.format(order.expectedDeliveryDate1.toLocalDateTime(), 'dd/MM/yyyy')} + ' - ' + ${#temporals.format(order.expectedDeliveryDate2.toLocalDateTime(), 'dd/MM/yyyy')}"></span>
								<p style="margin: 0px 0px 0px; padding: 0 20px; font-weight: bold; color: #5cbcd5;">Ngày giao hàng dự kiến</p>
							</div>
							<div th:if="${order.deliveryDate != null && order.status != 4 && order.status != 1 && order.status !=2 && order.status != 0}" class="date d-flex align-items-center" role="alert">
								<span class="material-symbols-outlined order" style="margin-right: 10px; margin-left: 20px">hourglass_bottom</span>
								<span th:text="${#temporals.format(order.deliveryDate.toLocalDateTime(), 'dd/MM/yyyy')}"></span>
								<p style="margin: 0px 0px 0px; padding: 0 20px; font-weight: bold; color: green;">Ngày giao hàng</p>
							</div>
							<div th:if="${order.status == 4}" class="notify d-flex align-items-center" role="alert">
								<span class="material-symbols-outlined order" style="margin-right: 10px; margin-left: 20px">contract_delete</span>
								<span th:text="${#temporals.format(order.deliveryDate.toLocalDateTime(), 'dd/MM/yyyy')}"></span>
								<p style="margin: 0px 0px 0px; padding: 0 20px; font-weight: bold; color: #f17746;">Đã hủy đơn</p>
							</div>
						</div>
					</div>
					<div class="col-03 center-content" style="width: 240px; align-items: flex-end; justify-content: flex-end">
						<div class="row-operation" style="display: flex; justify-content: flex-end; align-items: flex-end;">
							<a th:if="${order.status == 0}" class="btn btn-destroy" th:href="@{/cancelorder(orderId=${order.id})}">Hủy đơn</a>
							<a th:if="${order.status == 3 && daysBetween <= 15}" class="btn btn-return" th:href="@{/returnorder(orderId=${order.id})}">Trả hàng</a>
							<span th:if="${order.status != 0 && !(order.status == 3 && daysBetween <= 15)}"></span>
						</div>
						<form th:action="@{/receivedorder}" th:if="${order.status == 3}" method="post" style="display: flex; justify-content: flex-end; align-items: flex-end; margin-top: 20px">
							<input type="hidden" name="orderId" th:value="${order.id}" />
							<button type="submit" class="btn btn-receive">Đã nhận hàng</button>
						</form>
					</div>
				</div>

				<div class="TWLNg9">
					<div class="qJkRlY"></div>
				</div>

				<div class="next-table-body">
					<table>
						<colgroup style="width: 1100px;">
							<col style="width: 10%;">
							<col style="width: 40%;">
							<col style="width: 20%;">
							<col style="width: 30%;">
						</colgroup>
						<tbody>
						<tr th:each="orderItem : ${orderItems}" onmouseover="this.style.backgroundColor='#f2f5f6';" onmouseout="this.style.backgroundColor='transparent';" style="border-top: 1px solid #cecece;">
							<td rowspan="1" class="next-table-header-node first" style="padding: 20px 20px;">
								<img th:src="${orderItem.book.bookImages[0].path}" width="70px">
							</td>
							<td rowspan="1" class="next-table-header-node " th:text="${orderItem.book.name}" style="padding: 10px 20px;"></td>
							<td rowspan="1" class="next-table-header-node " th:text="${orderItem.quantity}" style="padding: 10px 20px; text-align: center;"></td>
							<td rowspan="1" class="next-table-header-node last" th:text="${#numbers.formatInteger(orderItem.totalPrice, 0, 'POINT')+ ' đ'}" style="text-align: right; padding: 10px 20px; color: orangered; font-weight: bold;"></td>
						</tr>
						</tbody>
					</table>
				</div>

				<div class="row-pay d-flex align-items-center" style="padding: 0px 0px 20px 0px; width: 100%; border-top: 1px solid #cecece; padding: 20px 0px">
					<div class="col-04" style="width: 80%; display: flex; justify-content: flex-end; align-items: flex-end;">
						<h6 style="margin: 0px 0px 0px">Tổng thanh toán</h6>
					</div>
					<div class="col-05" style="width: 20%; display: flex; justify-content: flex-end; align-items: flex-end; padding: 0px 20px">
						<p th:text="${#numbers.formatInteger(order.totalPrice, 0, 'POINT') + ' đ'}" class="align-middle text-center" style="color: orangered; font-weight: bold; margin: 0px 0px 0px"></p>
					</div>
				</div>

				<div class="row-status-pay d-flex align-items-center" style="padding: 0px 0px 20px 0px; width: 100%; border-top: 1px solid #cecece; padding: 20px 0px">
					<!--					<div class="col-04" style="display: flex; justify-content: flex-end; align-items: flex-end;">-->
					<!--						<p >Trạng thái</p>-->
					<!--					</div>-->
					<div class="col-05" style="display: flex; padding: 0px 20px;">
						<span th:if="${order.status != 4}" th:switch="${order.paymentStatus.status}" style="display: flex; align-items: center">
							<span style="margin: 0px 0px 0px; margin-right: 10px">Trạng thái</span>
							<span th:case="0" class="badge badge-primary">Chưa thanh toán</span>
							<span th:case="1" class="badge badge-success">Đã thanh toán</span>
							<span th:case="2" class="badge badge-warning">Xử lý hoàn tiền</span>
							<span th:case="3" class="badge badge-success">Đã hoàn tiền</span>
							<span th:case="4" class="badge badge-success">Không cần thanh toán</span>
						</span>
					</div>
				</div>
			</div>
		</div>

		<p class="text-center">
			<a class="btn btn-continue" th:href="@{/viewbooks}" style="margin: 0px 0px 0px">Tiếp tục mua sắm</a>
		</p>

	</div>
    <div th:replace="~{layout/footer :: footer}"></div>
    <!-- Thêm các tệp tin JavaScript -->
    <script th:src="@{/js/jquery-3.4.1.slim.min.js}"></script>
    <script th:src="@{/js/popper.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
</body>
</html>
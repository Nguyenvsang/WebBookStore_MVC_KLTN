<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Th√¥ng tin s√°ch</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
   	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<!-- Th√™m th∆∞ vi·ªán CSS v√† JS c·ªßa Lightbox v√†o ph·∫ßn head c·ªßa trang -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox-plus-jquery.min.js"></script>

	<!-- Th√™m th∆∞ vi·ªán jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!-- Th√™m plugin lightbox -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox-plus-jquery.min.js"></script>

	<style>
		
		body { background-color: #f8f9fa  }
		
		h3 {
        	text-align: center;
        	margin-top: 0px;
        	margin-bottom: 20px;  
        	color: rgb(2,88,155);     	
    	}
    	h5 {
			margin-left: 20px;
		}
    	.frame-01 {
			border: 1px solid rgb(182,232,241);
    		border-radius: 20px
		}
		
		.frame-01 {
			box-shadow: 0 8px 10px rgb(226, 226, 226);
			border: solid 2px rgb(226, 226, 226);
		}
		
		.frame-02 {

		}


		.btn-add-cart {
			background-color: #3448c5;
			border-radius: 50px;
			color: white;
			width: 220px;
			box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
			font-weight: bold;
			height: 40px
		}
		.btn-add-cart:hover {
			background-color: #211f7f;
			color: white;
			box-shadow: 0px 6px 8px rgba(0, 0.4, 0, 0.2);
			font-weight: bold;
			height: 40px
		}

		.btn-buy-now {
			background-color: #de2652;
			border-radius: 50px;
			color: white;
			width: 220px;
			box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
			font-weight: bold;
			height: 40px
		}
		.btn-buy-now:hover {
			background-color: #c90e0f;
			color: white;
			box-shadow: 0px 6px 8px rgba(0, 0.4, 0, 0.2);
			font-weight: bold;
			height: 40px
		}

		.btn-back {
			border-radius: 10px;
			color: white;
		}
		.btn-back:hover {
			color: rgb(182,232,241)
		}
		
		.flex-grow-2 {
			display: flex;
		    justify-content: right;
		    align-items: center;
		    margin-top: 30px;
		}
		.frame-description {
			
    		border-radius: 20px;
    		margin-top: 20px;
    		background-color: white;
		}
		.frame-description {
			box-shadow: 0 8px 10px rgb(226, 226, 226);
			
		}

		p.card-text.text-description {
			font-size: 20px;
			color: rgb(2,88,155);
		}
		.ml-2 {
			display: flex;
		    justify-content: right;
		    margin-right: 15px;
		}
		
		.container.main {
			border: 2px ;
	        border-radius: 5px;	  
	        border-radius: 15px;	
	        padding: 15px;
	        margin-top: 10px;
	        margin-bottom: 10px;
		}
		.navbar-nav {
			display: frex;
		}
		.navbar-nav-left {
			width: 70%;
		}
		.navbar-nav-right {
			width: 30%;
		}
		.nav-link {
			display: flex;
      		align-items: center;
      		column-gap: 0.5rem;
      		width: fit-content;
		}
		.move-right {
			margin-left: auto;
			display: flex;
			float: right;
		}
		.material-symbols-outlined{
			color: rgb(2,88,155);
		}
		
		.row.one {
			margin-top: 10px;
			margin-bottom: 10px;
		}
		
		.row.two {
			margin-top: 10px;
			margin-bottom: 10px;
		}
		.row.third {
			margin-top: 10px;
			margin-bottom: 10px;
		}
		.row.four {
			margin-top: 10px;
			margin-bottom: 10px;
		}
		
		.material-symbols-outlined.back {
			color: rgb(2,88,155);
		}
		
		.material-symbols-outlined.back:hover {
			color: rgb(182,232,241);
		}

		.rating {
		  unicode-bidi: bidi-override;
		  direction: rtl;
		  text-align: center;
		}
		.rating > input {
		  display: none;
		}
		.rating > label {
		  display: inline-block;
		  font-size: 30px;
		  color: #ccc;
		  cursor: pointer;
		}
		.rating > input:checked ~ label,
		.rating > label:hover,
		.rating > label:hover ~ label {
		  color: gold;
		}

		.user-review-box {
			border: 1px solid #ccc;
			border-radius: 10px;
			padding: 10px;
			margin-bottom: 20px;
		}

		.review {
			border: 1px solid #ddd;
			padding: 15px;
			margin-bottom: 20px;
			background-color: #f9f9f9;
			border-radius: 5px;
		}
		.review .user-info {
			display: flex;
			align-items: center;
		}
		.review .user-info img {
			width: 50px;
			height: 50px;
			border-radius: 50%;
			margin-right: 10px;
		}
		.review .user-info .username {
			font-weight: bold;
		}
		.review .stars, .user-review .stars {
			color: gold;
			margin-bottom: 10px;
		}
		.review .comment {
			margin-bottom: 10px;
		}
		.review .date {
			text-align: right;
			color: #888;
		}

		.like-button {
			background-color: grey; /* M√†u n·ªÅn xanh */
			border: none; /* Kh√¥ng vi·ªÅn */
			color: white; /* M√†u ch·ªØ tr·∫Øng */
			padding: 15px 32px; /* ƒê·ªám tr√™n d∆∞·ªõi 15px, tr√°i ph·∫£i 32px */
			text-align: center; /* CƒÉn gi·ªØa ch·ªØ */
			text-decoration: none; /* Kh√¥ng g·∫°ch ch√¢n */
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;
			cursor: pointer; /* Bi·∫øn ƒë·ªïi con tr·ªè khi di chu·ªôt qua n√∫t */
			border-radius: 12px; /* Bo g√≥c n√∫t */
		}

		.purchased, .published {
			color: green;
			font-weight: bold;
		}

		.not-purchased, .not-published {
			color: red;
			font-weight: bold;
		}

		.col {
			padding: 0px;
		}

		.col-data {
			font-weight: bold;
			width: 284px
		}

		.col-author {
			padding: 0px;
			color: #5390f5;
			display: flex;
			justify-content: flex-start;
			font-weight: bold;
			width: 284px;
		}

		.image {
			border: 1px solid #cecece;
			border-radius: 15px;
			margin-top: 10px;
		}

		.image:hover {
			border: 1px solid #211f7f;
		}

		.card-title {
 			text-decoration: none;
			color: black;
			font-family: Helvetica;
		}

		.card-title:hover {
			text-decoration: none;
			font-family: Helvetica;
		}

		.col-increase {
			align-items: center;
			margin-right: 20px;
		}

		.col-decrease {
			align-items: center;
			margin-left: 20px;
		}

		.favorite{
			color: grey;
			font-weight: bold;
		}

		.favorite:hover {
			color: #5390f5;
			font-weight: bold;
		}

		.detail-row {
			display: flex;
			align-items: baseline;
		}
		.detail-row p {
			margin-right: 10px;
		}
		.detail-row pre {
			font-size: 16px;
			font-family: Arial;
			color: rgb(2,88,155);
		}

		.alert-success {
			color: rgb(91,181,111);
		}
		.alert-danger {
			color: rgb(247,80,80);;
		}

		.material-symbols-outlined.close{
			color: grey;
			font-size: 30px;
		}
		.material-symbols-outlined.zoom_in{
			color: grey;
			font-size: 30px;
		}

		.material-symbols-outlined.zoom_out{
			color: grey;
			font-size: 30px;
		}

		.material-symbols-outlined.arrow_back_ios{
			color: grey;
			font-size: 30px;
		}

		.material-symbols-outlined.arrow_forward_ios{
			color: grey;
			font-size: 30px;
		}
		.material-symbols-outlined.play_arrow{
			color: grey;
			font-size: 30px;
		}

		.material-symbols-outlined.pause{
			color: grey;
			font-size: 30px;
		}

		.material-symbols-outlined.fullscreen{
			color: grey;
			font-size: 30px;
		}

		<!--V√¥ hi·ªáu h√≥a n√∫t number-->

		/* Chrome, Safari, Edge, Opera */
		input::-webkit-outer-spin-button,
		input::-webkit-inner-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}

		/* Firefox */
		input[type=number] {
			-moz-appearance: textfield;
		}

		button:focus {
			outline: none;
		}


	</style>
	
</head>
<body>
	<div th:replace="~{layout/header :: header}"></div>
	<!-- Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu c√≥ -->
	<div id="myAlert" th:if="${param.message}" class="alert"
		 th:classappend="${#strings.containsIgnoreCase(param.message, 'th√†nh c√¥ng') ? 'alert-success' : 'alert-danger'}">
		<span th:text="${param.message}" style="font-weight: bold;justify-content: center; display: flex"></span>
	</div>

<!--	<div id="myAlert02" th:if="${param.message}" class="alert"-->
<!--		 th:classappend="${#strings.containsIgnoreCase(param.message, 'th√†nh c√¥ng') ? 'alert-success' : 'alert-danger'}">-->
<!--		<span th:text="${param.message}" style="font-weight: bold;justify-content: center; display: flex"></span>-->
<!--	</div>-->
<!--	&lt;!&ndash; Ki·ªÉm tra xem s√°ch c√≥ c√≤n kinh doanh kh√¥ng &ndash;&gt;-->
<!--	<div th:if="${book.status == 0}" class="alert alert-danger">-->
<!--		S√°ch n√†y ƒë√£ ng·ª´ng kinh doanh-->
<!--	</div>-->

	<div class="container-fluid mb-4" style=" margin: 40px 0px 20px">
        <div class="container" style="padding: 0px;">
	        <div class="frame-01" style="background-color: white; padding: 20px">
				<div class="row-cart d-flex align-items-center" style="padding-bottom: 10px">
					<div class="col-00 d-flex align-items-center">
						<a th:href="${session.previousUrl}" class="before" style="align-items: center; display: flex; text-decoration: none;">
							<span class="material-symbols-outlined back">arrow_back_ios</span>
						</a>
						<h5 style="color: #211f7f; align-items: center;  margin: 0px 5px 0px 0px">Th√¥ng tin s√°ch</h5>
					</div>
				</div>
				<div class="frame-02" style="padding-top: 10px; border-top: 1px solid #cecece;">
		            <div class="row no-gutters" style="display: flex">
						<div class="col-image d-flex" style="width: 495px">
							<div class="row-image d-flex" style="width: 495px">
								<div class="col-list-image" style="width: 100px; margin-left: 20px">
				                    <img data-lightbox="gallery" data-title="H√¨nh ·∫£nh 1" th:src="${book.bookImages[1].path + '?v=' + randomNumber}" class="image" alt="Book Image 1" width="100" style="padding: 10px;"><br>
				                    <img data-lightbox="gallery" data-title="H√¨nh ·∫£nh 1" th:src="${book.bookImages[2].path + '?v=' + randomNumber}" class="image" alt="Book Image 1" width="100" style="padding: 10px;"><br>
				                    <img data-lightbox="gallery" data-title="H√¨nh ·∫£nh 1" th:src="${book.bookImages[3].path + '?v=' + randomNumber}" class="image" alt="Book Image 1" width="100" style="padding: 10px;"><br>
				                </div>
				                <div class="col-image-large" style="width: 375px; padding: 0px">
				                    <img data-lightbox="gallery" data-title="H√¨nh ·∫£nh 1" th:src="${book.bookImages[0].path + '?v=' + randomNumber}" alt="Book Image" class="card-img" style="border-radius: 15px; width: 295px; margin: 10px 25px 10px 45px">
				                </div>
							</div>
						</div>
		                <div class="col-content" style="width: 598px; padding: 10px 20px 10px 10px">
		                    <div class="card-body" style="padding: 0px">
		                        <h4 class="card-title" th:text="${book.name}" style="margin: 0px"></h4>
		                        <div class="row-main" style="border-bottom: 1px solid #cecece; padding: 0px 0px 10px">
									<div class="col" style="padding: 0px;">
										<div class="row-one" style="display: flex; justify-content: center; align-items: center; padding: 20px 0px 10px">
											<div class="col">
						                        <p class="card-text" style="display: flex; justify-content: left; align-items: center; font-family: Helvetica;">T√°c gi·∫£:</p>
											</div>
											<div class="col-author" style="width: 284px; display: flex; justify-content: left; align-items: center;">
												<span th:each="bookauthor : ${book.bookAuthors}" th:text="${bookauthor.author.name}"></span>
											</div>
										</div>
										
					                    <div class="row-two" style="display: flex; justify-content: center; align-items: center; padding-bottom: 10px">
											<div class="col">
					                        	<p class="card-text" style="font-family: Helvetica; display: flex; justify-content: left; align-items: center;">Nh√† xu·∫•t b·∫£n: </p>
											</div>
											<div class="col-data" style="display: flex; justify-content: left; align-items: center;">
												<span th:text="${book.publisher}"></span>
											</div>
					                    </div>
					                    
					                    <div class="row-four" style="display: flex; justify-content: center; align-items: center; padding-bottom: 10px">
											<div class="col">
					                        	<p class="card-text" style="display: flex; justify-content: left; align-items: center; font-family: Helvetica;">Danh m·ª•c:</p>
											</div>
											<div class="col-data" style="display: flex; justify-content: left; align-items: center;">
												 <span th:text="${book.category.name}"></span>
											</div>	
					                    </div>


										<!--Gi√° gi·∫£m -->
										<div class="row-price-favorite d-flex align-items-center" style="justify-content: space-between">
											<div class="col-price d-flex align-items-center">
												<div th:if="${book.currentDiscount != null}" class="col-price d-flex align-items-center">
													<p class="card-text"
													   style="margin: 0px 20px 0px 0px; font-size: 30px; font-weight: bold; text-align: left; color: orangered; ">
														<span th:text="${#numbers.formatInteger(book.currentDiscount.discountedPrice, 0, 'POINT')}" ></span> ƒë
													</p>
													<p class="card-text"
													   style="margin: 0px 10px 0px; font-size: 20px; font-weight: bold;text-align: left; color: grey; text-decoration: line-through; ">
														<span th:text="${#numbers.formatInteger(book.sellPrice, 0, 'POINT')}" ></span> ƒë
													</p>
												</div>
												<div th:if="${book.currentDiscount != null}" class="col-price d-flex align-items-center">
													<p class="card-text"
													   style="border-radius: 10px; padding: 5px; background-color: #5390f5; font-size: 18px; font-weight: bold; text-align: left; color: white; ">
														<span th:text="'-' + ${book.currentDiscount.discountPercent} + '%'" ></span>
													</p>
												</div>
											<!--Gi√° kh√¥ng gi·∫£m -->
												<div th:if="${book.currentDiscount == null}" class="col-price d-flex align-items-center">
													<p class="card-text"
													   style="font-size: 30px; font-weight: bold;text-align: left; color: orangered; ">
														<span th:text="${#numbers.formatInteger(book.sellPrice, 0, 'POINT')}" ></span> ƒë
													</p>
												</div>
											</div>
											<div class="col-favorite">
												<div class="col-favorite d-flex align-items-center">
													<form id="favoriteForm" class="favorite">
														<input type="hidden" name="bookId" th:value="${book.id}" />
														<a type="submit" class=" d-flex align-items-center">
															<i class="fa fa-heart fa-x d-flex align-items-center" style="margin-right: 5px"></i>
															<span  th:text="${isFavorite} ? 'ƒê√£ y√™u th√≠ch' : 'Y√™u th√≠ch'"></span>
														</a>
													</form>
												</div>
											</div>
											</div>

										</div>

		                        </div>

								<!-- N·∫øu ƒë√£ ng·ª´ng kinh doanh th√¨ kh√¥ng hi·ªÉn th·ªã c√°c n√∫t t∆∞∆°ng t√°c -->
								<div th:if="${book.status != 0}">
									<div class="row-add-to-cart" style="padding: 20px 0px">
										<form th:action="@{/addtocart}" method="post">

											<div class="row-quantity d-flex">
												<div class="col-quantity">
													<div class="row-01 d-flex align-items-center justify-content-center"
														 style="background: white; border-radius: 50px; border: 1px solid #cecece; width: 130px">
														<div class="col-decrease">
															<div class="input-group">
																<a class="outline" type="button" th:onclick="'decreaseQuantity(' + ${book.id} + ')'" style="align-items: center; justify-items: center; display: flex;">
																	<span class="material-symbols-outlined" style="color: grey; font-weight: bold; font-size: small">remove</span></a>
															</div>
														</div>
														<div class="col" style="width: 62px">
															<input type="number" id="quantity" name="quantity" class="form-control text-center align-middle" min="1" th:max="${book.quantity}" value="1" th:id="'quantity_' + ${book.id}"
																   style="text-align: center; border: none; width: 62px">
														</div>
														<div class="col-increase">
															<div class="input-group">
																<a class="outline" type="button" th:onclick="'increaseQuantity(' + ${book.id} + ', ' + ${book.quantity} + ')'" style="align-items: center; justify-items: center; display: flex;">
																	<span class="material-symbols-outlined" style="color: grey; font-weight: bold; font-size: small">add</span></a>
															</div>
														</div>
													</div>
												</div>
												<div class="col-third" style="display: flex; justify-content: center; align-items: center; color: grey; font-weight: bold">
													<p style="margin: 0px 5px 0px 15px; font-family: Helvetica;">C√≤n l·∫°i</p>
													<div class="col-data" style="font-family: Helvetica; display: flex; justify-content: center; align-items: center; width: 30px">
														<span th:text="${book.quantity}" style="padding: 0px 5px 0px 5px;"></span>
													</div>
													<p style="margin: 0px 0px 0px 5px; font-family: Helvetica;">trong kho h√†ng</p>
												</div>
											</div>

											<div class="row-add-cart d-flex" style="margin: 20px 0px 0px ">
												<div class="col-add-to-cart">
													<input type="hidden" name="bookId" th:value="${book.id}">
													<button type="submit" class="btn btn-add-cart btn-block" style="font-family: Helvetica; display: flex; align-items: center; justify-content: center">
														<span class="material-symbols-outlined" style="display: flex; align-items: center; color: white; margin: 0px 5px 0px 0px">
															shopping_bag
														</span>
														Th√™m v√†o gi·ªè h√†ng
													</button>
												</div>
												<div class="col-buy-now" style="margin-left: 10px">
													<input type="hidden" name="bookId" th:value="${book.id}">
													<button type="submit" class="btn btn-buy-now btn-block" style="font-family: Helvetica;">Mua ngay</button>
												</div>
											</div>
										</form>
									</div>
								</div>
		                    </div>
							<!-- Ki·ªÉm tra xem s√°ch c√≥ c√≤n kinh doanh kh√¥ng -->
							<div th:if="${book.status == 0}" class="alert alert-danger" style="color:  rgb(247,80,80); font-weight: bold;justify-content: center; display: flex">
								S√°ch n√†y ƒë√£ ng·ª´ng kinh doanh
							</div>
		                </div>
		            </div>
				</div>
	        </div>

			<div class="frame-description" style="padding: 20px">
				<div class="row-title" style="padding-bottom: 20px">
					<h4 class="card-title" th:text="${book.name}" style="margin: 0px"></h4>
				</div>
				<div class="row-content d-flex" style="">
					<div class="col-8" style="font-family: Arial; padding: 0px 20px 0px 0px;">
						<p class="card-text text-description" style="margin-bottom: 10px; color: #5390f5; font-weight: bold">Gi·ªõi thi·ªáu s√°ch:</p>
						<div class="description" style="height: 9em; overflow: hidden;">
							<p class="card-text content" th:text="${book.description}" style="text-align: justify;"></p>
						</div>
						<div style="display: flex; justify-content: center; align-items: center;">
							<button id="readMore" style="display: none; border-radius: 50px; background-color: white; color: #5390f5; margin-top: 20px; border: 1px solid #5390f5; width: 200px; height: 40px">Xem th√™m</button>
							<button id="readLess" style="display: none; border-radius: 50px; background-color: white; color: #5390f5; margin-top: 20px; border: 1px solid #5390f5; width: 200px; height: 40px">R√∫t g·ªçn</button>
						</div>
					</div>
					<div class="col-4" style="padding: 0px 0px 0px 20px">
						<p class="card-text" style="color: #5390f5; font-size: 20px; margin-bottom: 10px; font-weight: bold">Chi ti·∫øt:</p>
						<pre class="card-text" th:text="${book.detail}" style="font-size: 16px; font-family: Arial; white-space: pre-wrap;"></pre>
					</div>
				</div>
			</div>


			<!-- Ki·ªÉm tra xem ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p hay ch∆∞a -->
			<div th:if="${session.account == null}">
				<p style="padding: 20px 0px; color: rgb(247,80,80);">Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ vi·∫øt ƒë√°nh gi√° cho cu·ªën s√°ch!</p>
			</div>

			<!-- N·∫øu ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p nh∆∞ng ch∆∞a vi·∫øt ƒë√°nh gi√° -->
			<div th:if="${session.account != null and loggedInUserReview == null}">
				<!-- Button trigger modal -->
				<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#reviewModal">
					Vi·∫øt ƒë√°nh gi√°
				</button>
				<!-- Modal -->
				<div class="modal fade" id="reviewModal" tabindex="-1" role="dialog" aria-labelledby="reviewModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="reviewModalLabel">Vi·∫øt ƒë√°nh gi√°</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">√ó</span>
								</button>
							</div>
							<div class="modal-body">
								<!-- Th√™m thu·ªôc t√≠nh action v√† method v√†o form -->
								<form th:action="@{/addreviewbook}" method="post">
									<!-- Th√™m tr∆∞·ªùng ·∫©n ch·ª©a ID c·ªßa cu·ªën s√°ch -->
									<input type="hidden" name="bookId" th:value="${book.id}">
									<div class="form-group">
										<fieldset id="review-rating">
											<legend class="col-form-label">ƒê√°nh gi√°:</legend>
											<div class="rating">
												<input type="radio" id="star5" name="rating" value="5" required /><label for="star5" title="5 sao">‚òÜ</label>
												<input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 sao">‚òÜ</label>
												<input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 sao">‚òÜ</label>
												<input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 sao">‚òÜ</label>
												<input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 sao">‚òÜ</label>
											</div>
										</fieldset>
									</div>

									<div class="form-group">
										<label for="review-comment" class="col-form-label">B√¨nh lu·∫≠n:</label>
										<textarea class="form-control" id="review-comment" name="comment" maxlength="1000" required></textarea>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-dismiss="modal">ƒê√≥ng</button>
										<!-- Thay ƒë·ªïi type c·ªßa n√∫t L∆∞u ƒë√°nh gi√° th√†nh submit ƒë·ªÉ g·ª≠i form -->
										<button type="submit" class="btn btn-primary">L∆∞u ƒë√°nh gi√°</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>


			<!-- N·∫øu ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p v√† ƒë√£ vi·∫øt ƒë√°nh gi√° -->
			<div th:if="${session.account != null and loggedInUserReview != null}" class="user-review-box">
				<!-- Hi·ªÉn th·ªã ƒë√°nh gi√° c·ªßa ng∆∞·ªùi d√πng -->
				<div class="user-review">
					<h5>ƒê√°nh gi√° c·ªßa b·∫°n:</h5>
					<div class="stars" th:text="${'*'.repeat(loggedInUserReview.rating)}"></div>
					<p th:text="${loggedInUserReview.comment}"></p>
					<p class="purchased" th:if="${loggedInUserReview.isPurchased}">B·∫°n ƒë√£ mua cu·ªën s√°ch n√†y</p>
					<p class="not-purchased" th:if="${!loggedInUserReview.isPurchased}">B·∫°n ch∆∞a mua cu·ªën s√°ch n√†y</p>
					<!-- Hi·ªÉn th·ªã tr·∫°ng th√°i ƒë√°nh gi√° -->
					<p class="published" th:if="${loggedInUserReview.isPublished}">ƒê√°nh gi√° c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ƒëƒÉng.</p>
					<p class="not-published" th:if="${!loggedInUserReview.isPublished}">ƒê√°nh gi√° c·ªßa b·∫°n ƒëang ch·ªù duy·ªát.</p>

					<!-- Button trigger modal -->
					<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editReviewModal">
						Ch·ªânh s·ª≠a ƒë√°nh gi√°
					</button>

					<!-- Button to delete review -->
					<form id="deleteReviewForm" method="post" th:action="@{/deletereviewbook/} + ${book.id}">
						<button type="submit" class="btn btn-danger" id="deleteReviewButton">X√≥a ƒë√°nh gi√°</button>
					</form>

					<!-- Modal -->
					<div class="modal fade" id="editReviewModal" tabindex="-1" role="dialog" aria-labelledby="editReviewModalLabel" aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="editReviewModalLabel">Ch·ªânh s·ª≠a ƒë√°nh gi√°</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">√ó</span>
									</button>
								</div>
								<div class="modal-body">
									<!-- Th√™m thu·ªôc t√≠nh action v√† method v√†o form -->
									<form th:action="@{/editreviewbook}" method="post">
										<!-- Th√™m tr∆∞·ªùng ·∫©n ch·ª©a ID c·ªßa cu·ªën s√°ch -->
										<input type="hidden" name="bookId" th:value="${book.id}">
										<div class="form-group">
											<fieldset id="edit-review-rating">
												<legend class="col-form-label">ƒê√°nh gi√°:</legend>
												<div class="rating">
													<input type="radio" id="edit-star5" name="rating" value="5" th:checked="${loggedInUserReview.rating == 5}" required /><label for="edit-star5" title="5 sao">‚òÜ</label>
													<input type="radio" id="edit-star4" name="rating" value="4" th:checked="${loggedInUserReview.rating == 4}" /><label for="edit-star4" title="4 sao">‚òÜ</label>
													<input type="radio" id="edit-star3" name="rating" value="3" th:checked="${loggedInUserReview.rating == 3}" /><label for="edit-star3" title="3 sao">‚òÜ</label>
													<input type="radio" id="edit-star2" name="rating" value="2" th:checked="${loggedInUserReview.rating == 2}" /><label for="edit-star2" title="2 sao">‚òÜ</label>
													<input type="radio" id="edit-star1" name="rating" value="1" th:checked="${loggedInUserReview.rating == 1}" /><label for="edit-star1" title="1 sao">‚òÜ</label>
												</div>
											</fieldset>
										</div>

										<div class="form-group">
											<label for="edit-review-comment" class="col-form-label">B√¨nh lu·∫≠n:</label>
											<textarea class="form-control" id="edit-review-comment" name="comment" th:text="${loggedInUserReview.comment}" maxlength="500" required></textarea>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-dismiss="modal">ƒê√≥ng</button>
											<!-- Thay ƒë·ªïi type c·ªßa n√∫t L∆∞u ƒë√°nh gi√° th√†nh submit ƒë·ªÉ g·ª≠i form -->
											<button type="submit" class="btn btn-primary">L∆∞u ƒë√°nh gi√°</button>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>


			<!-- Hi·ªÉn th·ªã danh s√°ch c√°c ƒë√°nh gi√° -->
			<div th:each="review : ${bookReviews}">
				<div class="review">
					<!-- Hi·ªÉn th·ªã th√¥ng tin ng∆∞·ªùi d√πng ƒë√£ vi·∫øt ƒë√°nh gi√° -->
					<div class="user-info">
						<img th:src="${review.account.img != '' ? review.account.img : 'https://res.cloudinary.com/dosdzo1lg/image/upload/v1709875316/WebBookStoreKLTN/img_account/account_default.jpg'}" class="img-thumbnail" style="width: 50px; height: 50px;" id="currentImage2" alt="Img">
						<div class="username" th:text="${review.account.username}"></div>
					</div>
					<!-- Hi·ªÉn th·ªã s·ªë sao ƒë√°nh gi√° -->
					<div class="stars" th:text="${'*'.repeat(review.rating)}"></div>
					<!-- Hi·ªÉn th·ªã n·ªôi dung ƒë√°nh gi√° -->
					<div class="comment" th:text="${review.comment}"></div>
					<p class="purchased" th:if="${review.isPurchased}">Ng∆∞·ªùi d√πng n√†y ƒë√£ mua cu·ªën s√°ch</p>
					<p class="not-purchased" th:if="${!review.isPurchased}">Ng∆∞·ªùi d√πng n√†y ch∆∞a mua cu·ªën s√°ch</p>
					<!-- Hi·ªÉn th·ªã ng√†y ƒë√°nh gi√° -->
					<small class="date" th:text="${#temporals.format(review.datePosted.toLocalDateTime(), 'dd-MM-yyyy')}"></small>
					<!-- Hi·ªÉn th·ªã n√∫t Th√≠ch v√† s·ªë l∆∞·ª£ng th√≠ch -->
					<button class="like-button" th:text="${likedReviews.contains(review) ? 'üëç ƒê√£ th√≠ch' : 'üëç Th√≠ch'}" th:data-book-review-id="${review.id}">
						üëç Th√≠ch
					</button>
					<span class="like-count" th:text="'(' + ${review.bookReviewLikes.size()} + ')'"></span>
				</div>
			</div>
		</div>
    </div>

	<script th:src="@{/js/jquery-3.4.1.min.js}"></script>
	<script th:src="@{/js/popper.min.js}"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>


	<script>
		window.onload = function() {
            var content = document.querySelector('.description');
            var readMoreButton = document.getElementById('readMore');
            var readLessButton = document.getElementById('readLess');
            if (content.scrollHeight > content.clientHeight) {
                readMoreButton.style.display = 'block';
            }
            readMoreButton.onclick = function() {
                content.style.height = 'auto';
                readMoreButton.style.display = 'none';
                readLessButton.style.display = 'block';
            }
            readLessButton.onclick = function() {
                content.style.height = '9em';
                readLessButton.style.display = 'none';
                readMoreButton.style.display = 'block';
            }
        }
	</script>

    <script>
		// Th√¥ng b√°o khi kh√¥ng ch·ªçn sao ƒë·ªÉ ƒë√°nh gi√°
		function validateForm() {
			var radios = document.getElementsByName('rating');
			var formValid = false;

			var i = 0;
			while (!formValid && i < radios.length) {
				if (radios[i].checked) formValid = true;
				i++;
			}

			if (!formValid) alert("Vui l√≤ng cho s·ªë sao!");
			return formValid;
		}

        function goBack() {
            window.history.back();
        }

        // Khi t√†i li·ªáu HTML ƒë√£ s·∫µn s√†ng
        $(document).ready(function(){
            // Khi ng∆∞·ªùi d√πng nh·∫•p v√†o m·ªôt ng√¥i sao
            $('.rating input').on('click', function(){
                // L·∫•y gi√° tr·ªã c·ªßa ng√¥i sao ƒë√£ ƒë∆∞·ª£c nh·∫•p
                var rating = $(this).val();
                // Hi·ªÉn th·ªã gi√° tr·ªã ƒë√°nh gi√° trong console (b·∫°n c√≥ th·ªÉ x√≥a d√≤ng n√†y sau khi ki·ªÉm tra)
                console.log('Rating:', rating);
            });
        });

        $(document).ready(function() {
            // Khi ng∆∞·ªùi d√πng nh·∫•p v√†o n√∫t Th√≠ch
            $('.like-button').on('click', function() {
                // L·∫•y id c·ªßa ƒë√°nh gi√°
                var reviewId = $(this).data('book-review-id');

                // L∆∞u tr·ªØ tham chi·∫øu ƒë·∫øn n√∫t v√† s·ªë l∆∞·ª£ng th√≠ch
                var button = $(this);
                var likeCount = $(this).next('.like-count');

                // T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng XMLHttpRequest
                var xhr = new XMLHttpRequest();

                // Thi·∫øt l·∫≠p y√™u c·∫ßu POST ƒë·∫øn URL '/webbookstore/likebookreview'
                xhr.open('POST', '/webbookstore/likebookreview', true);

                // Thi·∫øt l·∫≠p ki·ªÉu n·ªôi dung c·ªßa y√™u c·∫ßu l√† 'application/x-www-form-urlencoded'
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                // X·ª≠ l√Ω s·ª± ki·ªán 'load' khi y√™u c·∫ßu ho√†n t·∫•t
                xhr.onload = function() {
                    var data = xhr.responseText;
                    if (data.startsWith('/')) {
                        // N·∫øu ph·∫£n h·ªìi b·∫Øt ƒë·∫ßu b·∫±ng '/', gi·∫£ ƒë·ªãnh n√≥ l√† URL v√† chuy·ªÉn h∆∞·ªõng ng∆∞·ªùi d√πng
                        window.location.href = data;
                    } else if (data === 'liked') {
                        button.text('üëç ƒê√£ th√≠ch');
                        button.css('background-color', 'blue');

                        // TƒÉng s·ªë l∆∞·ª£ng th√≠ch l√™n 1
                        var count = parseInt(likeCount.text().slice(1, -1));
                        likeCount.text('(' + (count + 1) + ')');
                    } else if (data === 'unliked') {
                        button.text('üëç Th√≠ch');
                        button.css('background-color', 'grey');

                        // Gi·∫£m s·ªë l∆∞·ª£ng th√≠ch ƒëi 1
                        var count = parseInt(likeCount.text().slice(1, -1));
                        likeCount.text('(' + (count - 1) + ')');
                    }
                };

                // G·ª≠i y√™u c·∫ßu v·ªõi d·ªØ li·ªáu
                xhr.send('reviewId=' + reviewId);
            });
        });

		// X·ª≠ l√Ω nh·∫•n n√∫t Th√™m/X√≥a v√†o/kh·ªèi danh s√°ch y√™u th√≠ch
		$(document).ready(function() {
			$('#favoriteForm a').on('click', function(event) {
				event.preventDefault();

				var form = $('#favoriteForm');
				var a = $(this);

				$.ajax({
					type: 'POST',
					url: '/webbookstore/adddeletefavoritebook',
					data: $(form).serialize(),
					success: function(response) {
						if (response.status === 'redirect') {
							window.location.href = response.location;
						} else if (response.status === 'success' && response.message == 'added') {
							a.find('span').text('ƒê√£ th√™m y√™u th√≠ch');
							a.find('i').removeClass('fa-heart').addClass('fa-heart-o');
							a.css('background-color', 'white');
							a.css('color', 'green'); /* M√†u xanh bi·ªÉn */
							a.addClass('active');
						} else if (response.status === 'success' && response.message == 'deleted') {
							a.find('span').text('ƒê√£ x√≥a y√™u th√≠ch');
							a.find('i').removeClass('fa-heart').addClass('fa-heart-o');
							a.css('background-color', 'white');
							a.css('color', 'grey');
							a.removeClass('active');
						} else if (response.status === 'error') {
							alert(response.message);
						}
					}
				});
			});
		});
	</script>
	<script>
		// ƒê·∫∑t th·ªùi gian cho alert
        setTimeout(function() {
            document.getElementById('myAlert').style.display = 'none';
        }, 10000);  // Alert s·∫Ω bi·∫øn m·∫•t sau 5 gi√¢y
	</script>
	<script>
		function increaseQuantity(bookId, maxQuantity) {
            var quantityInput = document.getElementById('quantity_' + bookId);
            if (quantityInput.value < maxQuantity) {
                quantityInput.value++;
            }
        }

        function decreaseQuantity(bookId) {
            var quantityInput = document.getElementById('quantity_' + bookId);
            if (quantityInput.value > 1) {
                quantityInput.value--;
            }
        }
	</script>

	<script>
		// L·∫•y div ch·ª©a c√°c h√¨nh ·∫£nh
        var imageContainer = document.querySelector('.row-image.d-flex');

        // M·∫£ng ch·ª©a ƒë∆∞·ªùng d·∫´n c·ªßa t·∫•t c·∫£ c√°c h√¨nh ·∫£nh trong div
        var images = Array.from(imageContainer.querySelectorAll('img')).map(img => img.src);

        // Khi ng∆∞·ªùi d√πng nh·∫•p v√†o m·ªôt h√¨nh ·∫£nh trong div...
        imageContainer.querySelectorAll('img').forEach((img, index) => {
            img.addEventListener('click', function(event) {
                // T·∫°o m·ªôt div m·ªõi ƒë·ªÉ ch·ª©a h√¨nh ·∫£nh
                var lightbox = document.createElement('div');
                lightbox.style.position = 'fixed';
                lightbox.style.top = 0;
                lightbox.style.bottom = 0;
                lightbox.style.left = 0;
                lightbox.style.right = 0;
                lightbox.style.background = 'rgba(0, 0, 0, 0.7)';
                lightbox.style.display = 'flex';
                lightbox.style.justifyContent = 'center';
                lightbox.style.alignItems = 'center';
                lightbox.style.zIndex = 99999;

                // T·∫°o m·ªôt h√¨nh ·∫£nh m·ªõi v√† ƒë·∫∑t ngu·ªìn c·ªßa n√≥ th√†nh ngu·ªìn c·ªßa h√¨nh ·∫£nh ƒë√£ nh·∫•p
                var lightboxImg = document.createElement('img');
                lightboxImg.src = event.target.src;
                lightboxImg.style.maxWidth = '80%';
                lightboxImg.style.maxHeight = '80%';

                // T·∫°o c√°c m≈©i t√™n
                var leftArrow = document.createElement('div');
                leftArrow.innerHTML = '<span class="material-symbols-outlined arrow_back_ios">arrow_back_ios</span>';
                leftArrow.style.position = 'absolute';
                leftArrow.style.left = '10px';
                leftArrow.style.top = '50%';
                leftArrow.style.fontSize = '3em';
                leftArrow.style.color = 'white';
                leftArrow.style.cursor = 'pointer';
                leftArrow.style.transform = 'translateY(-50%)';

                var rightArrow = document.createElement('div');
                rightArrow.innerHTML = '<span class="material-symbols-outlined arrow_forward_ios">arrow_forward_ios</span>';
                rightArrow.style.position = 'absolute';
                rightArrow.style.right = '10px';
                rightArrow.style.top = '50%';
                rightArrow.style.fontSize = '3em';
                rightArrow.style.color = 'white';
                rightArrow.style.cursor = 'pointer';
                rightArrow.style.transform = 'translateY(-50%)';

                // T·∫°o n√∫t ƒë√≥ng
                var closeButton = document.createElement('span');
                closeButton.innerHTML = '<span class="material-symbols-outlined close">close</span>';
                closeButton.style.position = 'absolute';
                closeButton.style.right = '10px';
                closeButton.style.top = '10px';
                closeButton.style.height = '40px';
                closeButton.style.width = '40px';
                closeButton.style.color = '#f1f1f1';
                closeButton.style.justifyContent = 'center';
                closeButton.style.alignItems = 'center';
                closeButton.style.display = 'flex';
                closeButton.style.fontSize = '30px';
                closeButton.style.fontWeight = 'bold';
                closeButton.style.cursor = 'pointer';
                closeButton.style.alignSelf = 'flex-start';

                closeButton.onclick = function() {
                    document.body.removeChild(lightbox);
                };

				// T·∫°o n√∫t Play
				var playButton = document.createElement('span');
				playButton.innerHTML = '<span class="material-symbols-outlined play_arrow">play_circle</span>';
				playButton.style.position = 'absolute';
				playButton.style.right = '60px';
				playButton.style.top = '10px';
				playButton.style.height = '40px';
				playButton.style.width = '40px';
				playButton.style.color = '#f1f1f1';
				playButton.style.justifyContent = 'center';
				playButton.style.alignItems = 'center';
				playButton.style.display = 'flex';
				playButton.style.fontSize = '30px';
				playButton.style.fontWeight = 'bold';
				playButton.style.cursor = 'pointer';
				playButton.style.alignSelf = 'flex-start';

				var intervalId;

				playButton.onclick = function() {
					if (intervalId) {
						// N·∫øu ƒë√£ c√≥ m·ªôt b·ªô ƒë·∫øm th·ªùi gian ƒëang ch·∫°y, h√£y d·ª´ng n√≥
						clearInterval(intervalId);
						intervalId = null;
						playButton.innerHTML = '<span class="material-symbols-outlined play_arrow">play_arrow</span>'; // ƒê·ªïi bi·ªÉu t∆∞·ª£ng th√†nh Play
					} else {
						// N·∫øu kh√¥ng c√≥ b·ªô ƒë·∫øm th·ªùi gian n√†o ƒëang ch·∫°y, h√£y b·∫Øt ƒë·∫ßu m·ªôt c√°i m·ªõi
						intervalId = setInterval(function() {
							index = (index + 1) % images.length;
							lightboxImg.src = images[index];
						}, 3000); // Chuy·ªÉn h√¨nh ·∫£nh sau m·ªói 3 gi√¢y
						playButton.innerHTML = '<span class="material-symbols-outlined pause">pause</span>'; // ƒê·ªïi bi·ªÉu t∆∞·ª£ng th√†nh Pause
					}
				};


                // T·∫°o n√∫t ph√≥ng to
                var zoomInButton = document.createElement('span');
                zoomInButton.innerHTML = '<span class="material-symbols-outlined zoom_in">zoom_in</span>';
                zoomInButton.style.position = 'absolute';
                zoomInButton.style.right = '160px';
                zoomInButton.style.top = '10px';
                zoomInButton.style.height = '40px';
                zoomInButton.style.width = '40px';
                zoomInButton.style.color = '#f1f1f1';
                zoomInButton.style.justifyContent = 'center';
                zoomInButton.style.alignItems = 'center';
                zoomInButton.style.display = 'flex';
                zoomInButton.style.fontSize = '30px';
                zoomInButton.style.fontWeight = 'bold';
                zoomInButton.style.cursor = 'pointer';
                zoomInButton.style.alignSelf = 'flex-start';

                zoomInButton.onclick = function() {
                    lightboxImg.style.maxWidth = parseInt(lightboxImg.style.maxWidth) + 10 + '%';
                    lightboxImg.style.maxHeight = parseInt(lightboxImg.style.maxHeight) + 10 + '%';
                };

                // T·∫°o n√∫t thu nh·ªè
                var zoomOutButton = document.createElement('span');
                zoomOutButton.innerHTML = '<span class="material-symbols-outlined zoom_out">zoom_out</span>';
                zoomOutButton.style.position = 'absolute';
                zoomOutButton.style.right = '210px';
                zoomOutButton.style.top = '10px';
                zoomOutButton.style.height = '40px';
                zoomOutButton.style.width = '40px';
                zoomOutButton.style.color = '#f1f1f1';
                zoomOutButton.style.justifyContent = 'center';
                zoomOutButton.style.alignItems = 'center';
                zoomOutButton.style.display = 'flex';
                zoomOutButton.style.fontSize = '30px';
                zoomOutButton.style.fontWeight = 'bold';
                zoomOutButton.style.cursor = 'pointer';
                zoomOutButton.style.alignSelf = 'flex-start';

                zoomOutButton.onclick = function() {
					if (parseInt(lightboxImg.style.maxWidth) > 80) {
						lightboxImg.style.maxWidth = parseInt(lightboxImg.style.maxWidth) - 10 + '%';
						lightboxImg.style.maxHeight = parseInt(lightboxImg.style.maxHeight) - 10 + '%';
					}
				};

				// T·∫°o n√∫t Fullscreen
				var fullscreenButton = document.createElement('span');
				fullscreenButton.innerHTML = '<span class="material-symbols-outlined fullscreen">fullscreen</span>';
				fullscreenButton.style.position = 'absolute';
				fullscreenButton.style.right = '110px';
				fullscreenButton.style.top = '10px';
				fullscreenButton.style.height = '40px';
				fullscreenButton.style.width = '40px';
				fullscreenButton.style.color = '#f1f1f1';
				fullscreenButton.style.justifyContent = 'center';
				fullscreenButton.style.alignItems = 'center';
				fullscreenButton.style.display = 'flex';
				fullscreenButton.style.fontSize = '30px';
				fullscreenButton.style.fontWeight = 'bold';
				fullscreenButton.style.cursor = 'pointer';
				fullscreenButton.style.alignSelf = 'flex-start';

				fullscreenButton.onclick = function() {
					if (!document.fullscreenElement) {
						if (lightbox.requestFullscreen) {
							lightbox.requestFullscreen();
						} else if (lightbox.mozRequestFullScreen) { /* Firefox */
							lightbox.mozRequestFullScreen();
						} else if (lightbox.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
							lightbox.webkitRequestFullscreen();
						} else if (lightbox.msRequestFullscreen) { /* IE/Edge */
							lightbox.msRequestFullscreen();
						}
					} else {
						if (document.exitFullscreen) {
							document.exitFullscreen();
						} else if (document.mozCancelFullScreen) { /* Firefox */
							document.mozCancelFullScreen();
						} else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
							document.webkitExitFullscreen();
						} else if (document.msExitFullscreen) { /* IE/Edge */
							document.msExitFullscreen();
						}
					}
				};


                // Th√™m h√¨nh ·∫£nh, m≈©i t√™n v√† n√∫t ƒë√≥ng v√†o lightbox
                lightbox.appendChild(lightboxImg);
                lightbox.appendChild(leftArrow);
                lightbox.appendChild(rightArrow);
                lightbox.appendChild(closeButton);
                lightbox.appendChild(zoomInButton);
                lightbox.appendChild(zoomOutButton);
                lightbox.appendChild(playButton);
                lightbox.appendChild(fullscreenButton);

                // Th√™m lightbox v√†o trang
                document.body.appendChild(lightbox);

                // Khi ng∆∞·ªùi d√πng nh·∫•p v√†o m≈©i t√™n ph·∫£i ho·∫∑c tr√°i, chuy·ªÉn ƒë·ªïi h√¨nh ·∫£nh
                document.addEventListener('keydown', function(event) {
                    if (event.key === 'ArrowRight') {
                        index = (index + 1) % images.length;
                        lightboxImg.src = images[index];
                    } else if (event.key === 'ArrowLeft') {
                        index = (index - 1 + images.length) % images.length;
                        lightboxImg.src = images[index];
                    }
                });

                // Khi ng∆∞·ªùi d√πng nh·∫•p v√†o m≈©i t√™n, chuy·ªÉn ƒë·ªïi h√¨nh ·∫£nh
                leftArrow.addEventListener('click', function() {
                    index = (index - 1 + images.length) % images.length;
                    lightboxImg.src = images[index];
                });

                rightArrow.addEventListener('click', function() {
                    index = (index + 1) % images.length;
                    lightboxImg.src = images[index];
                });
            });
        });

	</script>
	<script>
		function increaseQuantity(bookId, maxQuantity) {
            var quantityInput = document.getElementById('quantity_' + bookId);
            if (quantityInput.value < maxQuantity) {
                quantityInput.value++;
            } else {
                displayAlert('Xin l·ªói, b·∫°n kh√¥ng th·ªÉ ƒë·∫∑t qu√° ' + maxQuantity + ' cu·ªën s√°ch.', 'alert-danger');
                quantityInput.value = maxQuantity;
            }
        }

        // Th√™m s·ª± ki·ªán onblur v√†o √¥ nh·∫≠p s·ªë l∆∞·ª£ng
        document.getElementById('quantity_' + bookId).onblur = function() {
            increaseQuantity(bookId, maxQuantity);
        }

		function displayAlert(message, alertType) {
            // Ki·ªÉm tra xem ƒë√£ c√≥ th√¥ng b√°o ch∆∞a
            if (document.getElementById('myAlert02')) {
                return;
            }

            var alertBox = document.createElement('div');
            alertBox.className = 'alert ' + alertType;
            alertBox.id = 'myAlert02';
            alertBox.style.fontWeight = 'bold';
            alertBox.style.justifyContent = 'center';
            alertBox.style.display = 'flex';

            var alertText = document.createElement('span');
            alertText.textContent = message;

            alertBox.appendChild(alertText);

            // T√¨m ph·∫ßn t·ª≠ header v√† ch√®n th√¥ng b√°o ngay sau n√≥
            var header = document.getElementsByTagName('header')[0];
            header.parentNode.insertBefore(alertBox, header.nextSibling);

            // Th√¥ng b√°o s·∫Ω t·ª± ƒë·ªông bi·∫øn m·∫•t sau 10 gi√¢y
            setTimeout(function() {
                alertBox.remove();
            }, 10000);
        }
	</script>

	<div th:replace="~{layout/footer :: footer}"></div>
<!-- Th√™m c√°c t·ªáp tin JavaScript -->

</body>
</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lý do trả hàng</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <!--Thêm đoạn javascript bên dưới để có thể thực hiện dropdown Account	?\\-->
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>

        body { background-color: #f8f9fa  }

        h3 {
            text-align: center;
            margin-top: 10px;
            margin-bottom: 20px;
            color: rgb(2,88,155);
        }
        .form-container {

            border-radius: 5px;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            margin-bottom: 20px;
            margin-left: 100px;
            margin-right: 100px;
        }
        .btn-cancle {
            border: 2px solid rgb(241,56,71);
            color: rgb(0, 0, 0);
            border-radius: 10px;
        }
        .btn-cancle:hover {
            color: rgb(255, 0, 0);
        }

        .btn-order {
            background-color: #3448c5;
			border-radius: 50px;
			color: white;
			width: 200px;
			box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
			font-weight: bold;
        }
        .btn-order:hover {
            background-color: #211f7f;
			color: white;
			box-shadow: 0px 6px 8px rgba(0, 0.4, 0, 0.2);
			font-weight: bold;
        }

        .frame {
            background-color: rgb(182,232,241);
            border-radius: 10px;
            height: 50px;
            margin-top: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .text-total {
            text-align: center;
        }
        .navbar-nav {
            display: frex;
        }
        .navbar-nav-left {
            width: 70%;
        }
        .navbar-nav-right {
            width: 30%;
        }
        .nav-link {
            display: flex;
              align-items: center;
              column-gap: 0.5rem;
              width: fit-content;
        }
        .move-right {
            margin-left: auto;
            display: flex;
            float: right;
        }

        .material-symbols-outlined.back {
			color: rgb(2,88,155);
		}

		.material-symbols-outlined.back:hover {
			color: rgb(182,232,241);
		}

        .form-container {
            box-shadow: 0 8px 10px rgb(226, 226, 226);

        }

        .form-check {
            margin: 5px 0px;
            align-items: center;
            display: flex;
        }

        #reason0 {
            width: 10px;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #5591c5;
            margin-right: 5px;
        }

        #reason0:checked {
            box-shadow: 0 0 0 1px #d7ebff, 0 0 0 4px #d7ebff;
        }

        #reason1 {
            width: 10px;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #5591c5;
            margin-right: 5px;
        }

        #reason1:checked {
            box-shadow: 0 0 0 1px #d7ebff, 0 0 0 4px #d7ebff;
        }

        #reason2 {
            width: 10px;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #5591c5;
            margin-right: 5px;
        }

        #reason2:checked {
            box-shadow: 0 0 0 1px #d7ebff, 0 0 0 4px #d7ebff;
        }

        #reason3 {
            width: 10px;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #5591c5;
            margin-right: 5px;
        }

        #reason3:checked {
            box-shadow: 0 0 0 1px #d7ebff, 0 0 0 4px #d7ebff;
        }

        #reason4 {
            width: 10px;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #5591c5;
            margin-right: 5px;
        }

        #reason4:checked {
            box-shadow: 0 0 0 1px #d7ebff, 0 0 0 4px #d7ebff;
        }


        #reason5 {
            width: 10px;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #5591c5;
            margin-right: 5px;
        }

        #reason5:checked {
            box-shadow: 0 0 0 1px #d7ebff, 0 0 0 4px #d7ebff;
        }

        #reason6 {
            width: 10px;
            height: 10px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0 0 0 1px #5591c5;
            margin-right: 5px;
        }

        #reason6:checked {
            box-shadow: 0 0 0 1px #d7ebff, 0 0 0 4px #d7ebff;
        }

        .video-container {
            border: 1px solid #cecece;
            border-radius: 15px;
            box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
            padding: 20px;
            margin-bottom: 20px;
        }
        .video-container2 {
            border: 1px solid #cecece;
            border-radius: 15px;
            box-shadow: 0px 4px 6px rgba(0, 0.4, 0, 0.2);
            padding: 20px;
            margin-bottom: 20px;
        }
        .form-control-file {
            border: 1px solid #cecece;
            border-radius: 50px;

        }


        .form-group.row {
			width: 100% ;
			margin: 0px;
			margin-top: 10px;
		}

        .col-info {
			width: 833px;
		}

        .alert-success {
			color: rgb(91,181,111);
		}
		.alert-danger {
			color: rgb(247,80,80);
		}

        .my-custom-modal .modal-dialog {
            margin-top: 150px;
        }

		.my-custom-modal .modal-body {
			max-height: 400px;  /* Đặt chiều cao tối đa cho phần body của modal */
			overflow-y: auto;   /* Thêm thanh cuộn dọc nếu nội dung vượt quá chiều cao tối đa */
		}

        .btn-address.change-address-btn {
            height: 50px;
			background-color: white;
			border-radius: 50px;
			color: #36aa00;
			font-weight: bold;
			width: 200px;
			box-shadow: 0px 0px 10px rgba(192, 192, 192, 0.5);
		}

		.btn-address.change-address-btn:hover {
		    height: 50px;
			background-color: #228b22;
			color: white;
			font-weight: bold;
			box-shadow: 0px 0px 10px rgba(144, 238, 144, 0.5);
		}

        .row-home{
            box-shadow: 0px 0px 10px rgba(192, 192, 192, 0.5);
            width: 50px;
            height: 50px;
        }
        .row-home:hover {
            box-shadow: 0px 0px 10px rgba(144, 238, 144, 0.5);
            width: 50px;
            height: 50px;
        }
    </style>


</head>
<body>
<div th:replace="~{layout/header :: header}"></div>
<!-- Hiển thị thông báo nếu có -->
<!--<div th:if="${param.message}" class="alert" id="myAlert02"-->
<!--     th:classappend="${#strings.containsIgnoreCase(param.message, 'thành công') ? 'alert-success' : 'alert-danger'}">-->
<!--    <span th:text="${param.message}" style="font-weight: bold;justify-content: center; display: flex;"></span>-->
<!--</div>-->

<div class="container-fluid mb-4">
    <div class="container">
        <div class="form-container" style="background-color: white;">
            <div class="col-00" style="display: flex; align-items: center;">
                <a th:href="@{/vieworderitems(orderId=${order.id})}" class="before" style="align-items: center; display: flex; text-decoration: none;">
                    <span class="material-symbols-outlined back">arrow_back_ios</span>
                </a>
                <h6 style="color: #211f7f; align-items: center;  margin: 0px 5px 0px 0px; font-family: Verdana; font-weight: bold">Lý do trả hàng</h6>
            </div>
            <div class="col-order d-flex" style="justify-content: flex-end; font-size: 20px; border-bottom: 1px solid #cecece; padding: 10px">
                <p style="margin: 0px 5px 0px 0px; color: #f17746; font-weight: bold">MÃ ĐƠN HÀNG:</p>
                <span class="align-middle text-center" style="color: #f17746; font-weight: bold">[[${order.id}]]</span>
            </div>
            <form th:action="@{/returnorder(orderId=${order.id})}" method="post" enctype="multipart/form-data" style="margin-top: 10px">
                <div class="row d-flex align-items-center justify-content-center" style="width: 870px; margin-left: 0px">
                    <div class="col-01 align-items-center" style="width: 33.3%">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reason" id="reason0" value="Thiếu hàng" required>
                            <label class="form-check-label" for="reason0">Thiếu hàng</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reason" id="reason1" value="Người bán gửi sai hàng" required>
                            <label class="form-check-label" for="reason1">Người bán gửi sai hàng</label>
                        </div>
                    </div>
                    <div class="col-02 align-items-center" style="width: 33.3%">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reason" id="reason2" value="Hàng hư hỏng, rách, nát" required>
                            <label class="form-check-label" for="reason2">Hàng hư hỏng, rách, nát</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reason" id="reason3" value="Khác với mô tả" required>
                            <label class="form-check-label" for="reason3">Khác với mô tả</label>
                        </div>
                    </div>
                    <div class="col-03 align-items-center" style="width: 33.3%">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reason" id="reason4" value="Hàng giả, nhái" required>
                            <label class="form-check-label" for="reason4">Hàng giả, nhái</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reason" id="reason5" value="Hàng đã qua sử dụng" required>
                            <label class="form-check-label" for="reason5">Hàng đã qua sử dụng</label>
                        </div>
                    </div>
                </div>
                <div class="form-group" style="width: 100%">
                    <label for="detailreason">Mô tả chi tiết thêm:</label>
                    <input type="text" class="form-control" id="detailreason" name="detailreason" required style="border-radius: 50px">
                </div>


                <h6 class="text-center" style="color: #fe6502;">THÊM 4 HÌNH ẢNH VÀ 1 VIDEO MỞ HÀNG, 1 VIDEO QUAY SẢN PHẨM CHO THẤY RÕ SẢN PHẨM NHẬN ĐƯỢC KHÔNG ĐÚNG NHƯ MONG ĐỢI</h6>
                <h6 class="text-center" style="color: #3448c5;">Lưu ý: Mỗi hình ảnh tối đa 10MB và mỗi video tối đa 100MB</h6>

                <div class="row d-flex justify-content-center" style="width: 100%; padding: 20px; 0px; 0px; margin-left: 0px">
                    <div class="col-01" style="justify-content: center; width: 25%">
                        <input type="file" class="form-control-file" id="images" name="images" accept="image/*" onchange="checkFileSizeImg(event)" style="display:none;" multiple required>
                        <label for="images" style="color: grey; font-weight: bold; display: flex; align-items: center; justify-content: center; border-radius: 50px; border: 1px solid #cecece; width: 200px; height: 50px">
                            <span class="material-symbols-outlined d-flex align-items-center justify-content-center" style="color: grey; height: 26px; weight: 30px; margin-right: 2px">shift</span>
                            Chọn ảnh
                        </label>
                        <div class="image-preview" id="imagePreview" style="display: flex; justify-content: center; align-items: center;">
                        </div>
                    </div>
                </div>

                <div class="row d-flex justify-content-center" style="margin: 0px; width: 100%; padding: 20px 0px; border-bottom: 1px solid #cecece">
                    <div class="form-group video-container" style=" width: 40%; margin-right: 20px">
                        <h6 style="margin: 0px 0px 0px;">Video mở hàng</h6>
                        <div class="row-01 d-flex justify-content-center">
                            <input type="file" class="form-control-file" id="video1" name="video1" accept="video/*" onchange="checkFileSizeVideo1(event)"
                                   style="margin-bottom: 10px ; display: none;" required>
                            <label for="video1" style="color: grey; font-weight: bold; border:  1px solid #cecece; border-radius: 50px; margin: 10px; width: 200px; height: 50px"
                                   class="title d-flex align-items-center justify-content-center">Chọn video</label>
                        </div>
                        <div id="videoContainer" style="display: none; flex; justify-content: center; align-items: center;">
                            <video id="outputVideo1" width="200px" style="border: 1px solid #cecece;" controls></video>
                        </div>
                    </div>

                    <div class="form-group video-container2" style=" width: 40%; margin-left: 20px">
                        <h6 style="margin: 0px 0px 0px;">Video quay sản phẩm</h6>
                        <div class="row-02 d-flex justify-content-center">
                            <input type="file" class="form-control-file" id="video2" name="video2" accept="video/*" onchange="checkFileSizeVideo2(event)"
                                   style="margin-bottom: 10px ; display: none;" required>
                            <label for="video2" style="color: grey; font-weight: bold; border:  1px solid #cecece; border-radius: 50px; margin: 10px; width: 200px; height: 50px"
                                   class="title d-flex align-items-center justify-content-center">Chọn video</label>
                        </div>
                        <div id="videoContainer2" style="display: none; flex; justify-content: center; align-items: center;">
                            <video id="outputVideo2" width="200px" style="border: 1px solid #cecece;" controls></video>
                        </div>
                    </div>
                </div>


                <h6 class="text" style="margin: 20px 0px;">Thông tin người trả hàng</h6>
                <div class="row-info d-flex align-items-center justify-content-center">
                    <div class="col-08" style="width: 70%">
                        <div class="form-group d-flex align-items-center" style="border-radius: 50px; border: 1px solid #cecece;">
                            <span class="material-symbols-outlined" style="color: grey; margin: 5px">person_2</span>
                            <div class="col-info">
                                <input type="text" id="name" name="name" th:value="${order.name}" required class="form-control"
                                       style="border-top-right-radius: 50px; border-bottom-right-radius: 50px; padding: 0px 10px 0px 0px; border: none;">
                            </div>
                        </div>

                        <div class="form-group  d-flex align-items-center" style="border-radius: 50px; border: 1px solid #cecece;">
                            <span class="material-symbols-outlined" style="color: grey; margin: 5px">location_on</span>
                            <div class="col-info">
                                <input type="text" id="address" name="address" th:value="${order.address}" required class="form-control"
                                       style="border-top-right-radius: 50px; border-bottom-right-radius: 50px; padding: 0px 10px 0px 0px; border: none;">
                            </div>
                        </div>
                        <div class="form-group  d-flex align-items-center" style="border-radius: 50px; border: 1px solid #cecece;">
                            <span class="material-symbols-outlined" style="color: grey; margin: 5px">call</span>
                            <div class="col-info">
                                <input type="text" id="phoneNumber" name="phoneNumber" th:value="${order.phoneNumber}" required class="form-control"
                                       style="border-top-right-radius: 50px; border-bottom-right-radius: 50px; padding: 0px 10px 0px 0px; border: none;">
                            </div>
                        </div>
                        <div class="form-group  d-flex align-items-center" style="border-radius: 50px; border: 1px solid #cecece; margin-bottom: 20px">
                            <span class="material-symbols-outlined" style="color: grey; margin: 5px">mail</span>
                            <div class="col-info">
                                <input type="email" id="email" name="email" th:value="${order.email}" required class="form-control"
                                       style="border-top-right-radius: 50px; border-bottom-right-radius: 50px; padding: 0px 10px 0px 0px; border: none;">
                            </div>
                        </div>
                    </div>
                    <div class="col-04 d-flex align-items-center justify-content-center" style="flex-direction: column; width: 30%">
                        <div class="row-home d-flex align-items-center justify-content-center" style="border-radius: 50%">
                            <span class="material-symbols-outlined" style="color: #36aa00; margin: 0px;">roofing</span>
                        </div>

                        <!-- Button trigger modal -->
                        <button type="button" style="margin-top: 20px" class="btn btn-address change-address-btn" data-toggle="modal" data-target="#changeAddressModal">
                            Chọn địa chỉ có sẵn
                        </button>
                        <!-- Button trigger modal -->
                        <button type="button" style="margin-top: 20px" class="btn btn-address change-address-btn" data-target="#oldAddress">
                            Giữ nguyên địa chỉ cũ
                        </button>
                    </div>
                </div>



                <div class="text-center">
                    <button type="submit" class="btn btn-order" style="font-weight: bold">Xác nhận trả hàng</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal hiển thị pop up để chọn địa chỉ có sẵn -->
<div class="modal fade my-custom-modal" id="changeAddressModal" tabindex="-1" role="dialog" aria-labelledby="changeAddressModalLabel" aria-hidden="true" style="margin: 0px">
    <div class="modal-dialog" role="document" style="margin: 0px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); border-radius: 15px">
        <div class="modal-content">
            <div class="modal-header">
                <div class="row-title d-flex">
                    <span class="material-symbols-outlined" style="color: #211f7f; margin: 0px; padding-right: 5px">distance</span>
                    <h6 class="modal-title" id="changeAddressModalLabel" style="color: #211f7f;">Chọn địa chỉ</h6>
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- -->
                <form id="changeAddressForm">
                    <div th:each="address : ${addresses}">
                        <div class="card mb-3">
                            <div class="card-body">
                                <input type="radio" name="addressId" th:value="${address.id}">
                                <p class="card-text">
                                    <span class="recipientName" th:text="${address.recipientName}"></span> - <span class="phoneNumber" th:text="${address.phoneNumber}"></span>
                                </p>
                                <p class="card-text">
                                    <span class="cityName" th:text="${address.city.name}"></span>, <span class="districtName" th:text="${address.district.name}"></span>, <span class="wardName" th:text="${address.ward.name}"></span>
                                </p>
                                <p class="card-text">
                                    <span class="addressDetails" th:text="${address.addressDetails}"></span>
                                </p>
                                <p class="card-text">
                                    <span th:text="${address.addressNote}"></span>
                                </p>
                                <p class="card-text">
                                    Loại địa chỉ: <span th:text="${address.addressType == 0 ? 'Văn phòng' : 'Nhà'}"></span>
                                </p>
                                <p class="card-text">
                                    Mặc định: <span th:text="${address.isDefault == 1 ? 'Có' : 'Không'}"></span>
                                </p>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <!-- Thêm nút "Thêm địa chỉ" -->
                <a th:href="@{/addaddress}" class="btn btn-success" style="border-radius: 15px">Thêm địa chỉ</a>
                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="border-radius: 15px">Đóng</button>
                <button type="button" class="btn btn-primary" id="changeAddressConfirm" style="border-radius: 15px">Chọn</button>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{layout/footer :: footer}"></div>

<script>
    function checkFileSizeImg(event) {
        var files = event.target.files;
        var output = document.getElementById('imagePreview');
        output.innerHTML = '';
        if(files.length > 4){
            displayAlert("Bạn chỉ có thể tải lên tối đa 4 hình ảnh.");
            return;
        }
        for(var i = 0; i< files.length; i++)
        {
            var file = files[i];
            // Kiểm tra kích thước file
            // Nếu file lớn hơn 10MB thì không cho phép upload
            if(file.size > 10 * 1024 * 1024){
                displayAlert("File " + file.name + " có kích thước vượt quá 10MB.!");
                return;
            }
            // Hiển thị ảnh đã chọn
            var img = document.createElement("img");
            img.id = "outputImg" + i;
            img.width = 170;
            img.style.border = "1px solid #cecece";
            img.style.borderRadius = "10px";
            img.style.margin = "10px";
            img.style.cursor = "pointer"; // Thêm con trỏ chuột
            img.onclick = function() { // Thêm sự kiện click
                var modal = document.createElement("div");
                modal.id = "myModal";
                modal.style.display = "flex";
                modal.style.justifyContent = "flex-start";
                modal.style.alignItems = "center";
                modal.style.position = "fixed";
                modal.style.zIndex = "9999"; // Đặt zIndex thành một giá trị lớn
                modal.style.left = "0";
                modal.style.top = "0";
                modal.style.width = "100%";
                modal.style.height = "100%";
                modal.style.overflow = "auto";
                modal.style.backgroundColor = "rgba(0,0,0,0.5)";

                var closeButton = document.createElement("span");
                closeButton.innerHTML = "×";
                closeButton.style.position = "absolute";
                closeButton.style.right = "10px";
                closeButton.style.top = "10px";
                closeButton.style.height = "40px";
                closeButton.style.width = "40px";
                closeButton.style.color = "#f1f1f1";
                closeButton.style.justifyContent = "center";
                closeButton.style.alignItems = "center";
                closeButton.style.display = "flex";
                closeButton.style.fontSize = "30px";
                closeButton.style.fontWeight = "bold";
                closeButton.style.cursor = "pointer";
                closeButton.style.alignSelf = "flex-start"; // Thêm ở đây
                closeButton.onclick = function() {
                    document.body.removeChild(modal);
                };

                var modalContent = document.createElement("img");
                modalContent.src = this.src;
                modalContent.style.margin = "auto";
                modalContent.style.display = "block";
                modalContent.style.width = "80%";
                modalContent.style.maxWidth = "700px";

                modal.appendChild(closeButton);
                modal.appendChild(modalContent);
                document.body.appendChild(modal);

                modal.onclick = function(event) {
                    if (event.target == modal) {
                        document.body.removeChild(modal);
                    }
                }
            };
            output.appendChild(img);
            img.src = URL.createObjectURL(event.target.files[i]);
        }
    }


    function displayAlert(message, alertType) {
        // Kiểm tra xem đã có thông báo chưa
        if (document.getElementById('myAlert02')) {
            return;
        }

        var alertBox = document.createElement('div');
        alertBox.className = 'alert ' + alertType;
        alertBox.id = 'myAlert02';
        alertBox.style.fontWeight = 'bold';
        alertBox.style.color = 'rgb(247,80,80)';
        alertBox.style.backgroundColor = 'rgb(247,214,217)';
        alertBox.style.justifyContent = 'center';
        alertBox.style.display = 'flex';

        var alertText = document.createElement('span');
        alertText.textContent = message;

        alertBox.appendChild(alertText);

        // Tìm phần tử header và chèn thông báo ngay sau nó
        var header = document.getElementsByTagName('header')[0];
        header.parentNode.insertBefore(alertBox, header.nextSibling);

        // Thông báo sẽ tự động biến mất sau 10 giây
        setTimeout(function() {
            alertBox.remove();
        }, 10000);
    }
</script>


<script>
    function checkFileSizeVideo1(event) {
        var file = event.target.files[0];
        if(file.size > 100 * 1024 * 1024) { // 100MB
            displayAlert("File video mở hàng quá lớn! Vui lòng chọn file video nhỏ hơn 100MB.", 'alert-danger');
            event.target.value = ""; // reset the input
        } else {
            var videoContainer = document.getElementById('videoContainer');
            var videoElement = document.getElementById('outputVideo1');
            if (file) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    videoElement.src = e.target.result;
                };
                reader.readAsDataURL(file);
                videoContainer.style.display = 'flex';
            } else {
                videoContainer.style.display = 'none';
            }
        }
    };

    function checkFileSizeVideo2(event) {
        var file = event.target.files[0];
        if(file.size > 100 * 1024 * 1024) { // 100MB
            displayAlert('File video quay sản phẩm quá lớn! Vui lòng chọn file video nhỏ hơn 100MB.', 'alert-danger');
            event.target.value = ""; // reset the input
        } else {
            var videoContainer = document.getElementById('videoContainer2');
            var videoElement = document.getElementById('outputVideo2');
            if (file) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    videoElement.src = e.target.result;
                };
                reader.readAsDataURL(file);
                videoContainer2.style.display = 'flex';
            } else {
                videoContainer2.style.display = 'none';
            }
        }
    };

    function displayAlert(message, alertType) {
        // Kiểm tra xem đã có thông báo chưa
        if (document.getElementById('myAlert02')) {
            return;
        }

        var alertBox = document.createElement('div');
        alertBox.className = 'alert ' + alertType;
        alertBox.id = 'myAlert02';
        alertBox.style.fontWeight = 'bold';
        alertBox.style.color = 'rgb(247,80,80)';
        alertBox.style.backgroundColor = 'rgb(247,214,217)';
        alertBox.style.justifyContent = 'center';
        alertBox.style.display = 'flex';

        var alertText = document.createElement('span');
        alertText.textContent = message;

        alertBox.appendChild(alertText);

        // Tìm phần tử header và chèn thông báo ngay sau nó
        var header = document.getElementsByTagName('header')[0];
        header.parentNode.insertBefore(alertBox, header.nextSibling);

        // Thông báo sẽ tự động biến mất sau 10 giây
        setTimeout(function() {
            alertBox.remove();
        }, 10000);
    }
</script>

<script>
    var checkboxes = document.querySelectorAll('input[type="radio"][name="reason"]');

    checkboxes.forEach(function(checkbox) {
        checkbox.addEventListener('change', function() {
            checkboxes.forEach(function(c) {
                c.style.backgroundColor = '';
            });
            if (this.checked) {
                this.style.backgroundColor = '#5591c5';
            }
        });
    });

    // Set the background color for the checked checkbox when the page loads
    var checkedCheckbox = document.querySelector('input[type="radio"][name="reason"]:checked');
    if (checkedCheckbox) {
        checkedCheckbox.style.backgroundColor = '#5591c5';
    }
</script>

<script>
    // Lưu giá trị ban đầu từ order
    var originalValues = {
        name: $('#name').val(),
        address: $('#address').val(),
        phoneNumber: $('#phoneNumber').val(),
        email: $('#email').val()
    };

    // Khi nhấn nút "Giữ nguyên địa chỉ cũ", gán lại giá trị ban đầu cho các trường
    $('.change-address-btn[data-target="#oldAddress"]').click(function() {
        $('#name').val(originalValues.name);
        $('#address').val(originalValues.address);
        $('#phoneNumber').val(originalValues.phoneNumber);
        $('#email').val(originalValues.email);
    });
</script>

<script>
    // Mở pop up chọn địa chỉ và cập nhật địa chỉ có sẵn khi chọn
    $(document).ready(function() {
        var currentAddressId;

        $('#changeAddressConfirm').click(function() {
            var selectedAddressId = $('input[name="addressId"]:checked').val();
            if (selectedAddressId) {
                // Cập nhật id của địa chỉ đang được chọn
                currentAddressId = selectedAddressId;

                // Cập nhật địa chỉ nhận hàng trên giao diện
                var selectedAddress = $('input[name="addressId"]:checked').closest('.card-body');
                $('#name').val(selectedAddress.find('.recipientName').text());
                $('#phoneNumber').val(selectedAddress.find('.phoneNumber').text());
                $('#address').val(selectedAddress.find('.addressDetails').text() + ', ' +
                                  selectedAddress.find('.wardName').text() + ', ' +
                                  selectedAddress.find('.districtName').text() + ', ' +
                                  selectedAddress.find('.cityName').text());

                // Gửi yêu cầu đến máy chủ để cập nhật địa chỉ nhận hàng
                // ...

                // Đóng modal
                $('#changeAddressModal').modal('hide');
            }
        });

        // Khi mở modal, chọn radio button tương ứng với địa chỉ đang được chọn
        $('#changeAddressModal').on('show.bs.modal', function() {
            $('input[name="addressId"][value="' + currentAddressId + '"]').prop('checked', true);
        });
    });

</script>

</body>

</html>